(()=>{var e={};e.id=564,e.ids=[564],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},3504:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>o}),s(5125),s(996),s(8980);var a=s(170),r=s(5002),n=s(3876),i=s.n(n),l=s(6299),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["(content)",{children:["report",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5125)),"/home/david-dwiyanto/Documents/Kerja/DBKlik/Warehouse System/warehouse-system-intern-frontend/src/app/(content)/report/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,8980)),"/home/david-dwiyanto/Documents/Kerja/DBKlik/Warehouse System/warehouse-system-intern-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/david-dwiyanto/Documents/Kerja/DBKlik/Warehouse System/warehouse-system-intern-frontend/src/app/(content)/report/page.tsx"],m="/(content)/report/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(content)/report/page",pathname:"/report",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6910:(e,t,s)=>{Promise.resolve().then(s.bind(s,7341))},7341:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(7247),r=s(8964),n=s(2569),i=s(9432),l=s(4030),d=s(4597);let o=e=>{let t=new Date(e),s=t.getFullYear(),a=("0"+t.getDate()).slice(-2),r=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getHours()).slice(-2),i=("0"+t.getMinutes()).slice(-2),l=("0"+t.getSeconds()).slice(-2);return`${a}-${r}-${s} ${n}:${i}:${l}`};var c=s(3707),m=s(3808);let u=()=>{let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,u]=(0,r.useState)(null),[h,x]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[j,b]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[N,w]=(0,r.useState)(!1),[f,k]=(0,r.useState)(0),[_,S]=(0,r.useState)(null),[P,q]=(0,r.useState)(null),[B,C]=(0,r.useState)(1),[D,I]=(0,r.useState)(1),[E,H]=(0,r.useState)(!1),[M,U]=(0,r.useState)(null),[F,K]=(0,r.useState)(null),z=(0,c.Z)(j,300),[A,Q]=(0,r.useState)(1),[V,G]=(0,r.useState)(!1),$=(0,r.useCallback)(async()=>{n(!0);try{let e=await (0,l.Pj)(A,5,z,h,p);t(e),G(!1)}catch(e){u(e.message||"Unknown Error")}finally{n(!1)}},[A,5,z,h,p]);if((0,r.useEffect)(()=>{$()},[$]),i)return(0,a.jsxs)("div",{children:["Error: ",i]});let L=(e,t,s)=>{y(t),q(e),C(s),I(s),U(null)},W=async()=>{if(null===P||B===D||B<1||!Number.isInteger(B)){K("Quantity should be a positive integer of at least 1."),U(!1);return}H(!0),U(null);try{await (0,l.ZZ)(P,B),t(e=>e.map(e=>e.id===P?{...e,qty:B}:e)),U(!0),I(B),K("")}catch(e){console.error(e),U(!1)}finally{H(!1)}},R=async()=>{w(!0);try{await (0,l.mj)(f),await $();let e=document.getElementById("delete_modal");e&&e.close()}catch(e){e instanceof Error?console.error(e.message):console.error("An unknown error occurred")}finally{w(!1)}},Z=async()=>{try{let e=(await (0,l.Pj)(1,1e4,z,h,p)).map(e=>({Date:o(e.created_at),"Invoice Number":e.invoice_number,SKU:e.sku,"Nama Barang":e.master_item.nama_barang,User:e.user.name,"Barcode SN":e.barcode_sn,Quantity:e.qty})),t=m.P6.json_to_sheet(e),s=m.P6.book_new();t["!cols"]=[{wch:20},{wch:20},{wch:15},{wch:40},{wch:20},{wch:20},{wch:10}],m.P6.book_append_sheet(s,t,"Scanned Per Items"),m.NC(s,"Scanned_Per_Items_Report.xlsx")}catch(e){console.error("Error fetching or exporting items:",e)}},T=async()=>{try{let e=(await (0,l.Pj)(1,1e4,z,h,p)).reduce((e,t)=>{let s=t.invoice_number;e[s]||(e[s]={Date:o(t.created_at),"Invoice Number":s,Items:[],User:t.user.name});let a=e[s].Items.find(e=>e.SKU===t.sku&&e["Nama Barang"]===t.master_item.nama_barang);return a?(a["Barcode SN"]+=`, ${t.barcode_sn}`,a.Quantity+=t.qty):e[s].Items.push({SKU:t.sku,"Nama Barang":t.master_item.nama_barang,"Barcode SN":t.barcode_sn,Quantity:t.qty}),e},{}),t=Object.values(e).flatMap(e=>e.Items.map((t,s)=>({Date:0===s?e.Date:"","Invoice Number":0===s?e["Invoice Number"]:"",User:0===s?e.User:"",SKU:t.SKU,"Nama Barang":t["Nama Barang"],"Barcode SN":t["Barcode SN"],Quantity:t.Quantity}))),s=m.P6.json_to_sheet(t,{skipHeader:!0}),a=m.P6.book_new();m.P6.sheet_add_aoa(s,[["Date","Invoice Number","User","SKU","Nama Barang","Barcode SN","Quantity"]],{origin:"A1"}),m.P6.sheet_add_json(s,t,{header:["Date","Invoice Number","User","SKU","Nama Barang","Barcode SN","Quantity"],skipHeader:!0,origin:"A2"}),s["!cols"]=[{wch:20},{wch:20},{wch:20},{wch:15},{wch:40},{wch:20},{wch:10}],m.P6.book_append_sheet(a,s,"Grouped Invoices"),m.NC(a,"Grouped_Invoices_Report.xlsx")}catch(e){console.error("Error fetching or exporting items:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("dialog",{id:"delete_modal",className:"modal",children:[(0,a.jsxs)("div",{className:"modal-box",children:[a.jsx("h3",{className:"font-bold text-lg",children:"Yakin ingin menghapus data ini?"}),a.jsx("p",{className:"py-4",children:_}),(0,a.jsxs)("div",{className:"flex justify-end",children:[N?a.jsx(a.Fragment,{}):a.jsx("button",{className:"btn",onClick:()=>{let e=document.getElementById("delete_modal");e&&e.close()},children:"Tidak"}),a.jsx("button",{disabled:!!N,onClick:R,className:`btn btn-error text-white mx-2 ${N?"animate-pulse":""}`,children:N?"Deleting...":"Delete"})]})]}),a.jsx("form",{method:"dialog",className:"modal-backdrop",children:a.jsx("button",{children:"close"})})]}),(0,a.jsxs)("div",{className:"drawer drawer-end z-10",children:[a.jsx("input",{id:"edit_report",type:"checkbox",className:"drawer-toggle"}),(0,a.jsxs)("div",{className:"drawer-side",children:[a.jsx("label",{htmlFor:"edit_report","aria-label":"close sidebar",className:"drawer-overlay"}),(0,a.jsxs)("div",{className:"menu bg-base-200 text-base-content min-h-full w-80 p-4",children:[(0,a.jsxs)("h1",{className:"text-blue-700",children:["Edit Report | ",v]}),(0,a.jsxs)("div",{className:"my-4",children:[a.jsx("label",{htmlFor:"quantity",className:"text-sm font-medium mb-2 block",children:"Quantity"}),a.jsx("input",{type:"number",id:"quantity",placeholder:"Enter quantity",className:"input input-bordered w-3/4",value:B,onChange:e=>C(parseInt(e.target.value))})]}),(0,a.jsxs)("div",{className:"",children:[a.jsx("label",{htmlFor:"edit_report",className:"btn btn-ghost btn-sm",children:"Cancel"}),a.jsx("button",{className:"btn btn-primary btn-sm mx-2",onClick:W,disabled:B===D||E,children:E?"Saving...":"Save"})]}),null!==M&&a.jsx("div",{className:`mt-4 text-sm ${M?"text-green-500":"text-red-500"}`,children:M?"Saved successfully!":"Failed to save changes"}),F&&a.jsx("div",{className:"text-red-500",children:F})]})]})]}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between mr-2 mx-2",children:[a.jsx("div",{className:"gap-4 mb-4 mt-2",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("input",{type:"date",value:h,onChange:e=>x(e.target.value),className:"input input-bordered input-sm",placeholder:"Start Date"}),a.jsx("div",{className:"mt-1 mx-3 text-sm",children:"To"}),a.jsx("input",{type:"date",value:p,onChange:e=>g(e.target.value),className:"input input-bordered input-sm",placeholder:"End Date"})]})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"dropdown mr-2",children:[(0,a.jsxs)("div",{tabIndex:0,role:"button",className:"btn btn-success btn-sm text-white",children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"25",height:"25",viewBox:"0 0 48 48",children:[a.jsx("path",{fill:"#4CAF50",d:"M41,10H25v28h16c0.553,0,1-0.447,1-1V11C42,10.447,41.553,10,41,10z"}),a.jsx("path",{fill:"#FFF",d:"M32 15H39V18H32zM32 25H39V28H32zM32 30H39V33H32zM32 20H39V23H32zM25 15H30V18H25zM25 25H30V28H25zM25 30H30V33H25zM25 20H30V23H25z"}),a.jsx("path",{fill:"#2E7D32",d:"M27 42L6 38 6 10 27 6z"}),a.jsx("path",{fill:"#FFF",d:"M19.129,31l-2.411-4.561c-0.092-0.171-0.186-0.483-0.284-0.938h-0.037c-0.046,0.215-0.154,0.541-0.324,0.979L13.652,31H9.895l4.462-7.001L10.274,17h3.837l2.001,4.196c0.156,0.331,0.296,0.725,0.42,1.179h0.04c0.078-0.271,0.224-0.68,0.439-1.22L19.237,17h3.515l-4.199,6.939l4.316,7.059h-3.74V31z"})]}),"Export Excel",a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})]}),(0,a.jsxs)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:[a.jsx("li",{children:a.jsx("a",{onClick:Z,children:"Export Per-item"})}),a.jsx("li",{children:a.jsx("a",{onClick:T,children:"Export Grouping"})})]})]}),(0,a.jsxs)("div",{className:"max-w-md",children:[a.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),i&&a.jsx("div",{className:"text-red-500",children:i}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:a.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:a.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),a.jsx("input",{type:"text",value:j,onChange:e=>b(e.target.value),id:"default-search",className:"block w-full input-sm p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-gray-500 focus:border-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-gray-500 dark:focus:border-gray-500",placeholder:"Cari sku, barcode sn, inv",required:!0})]})]})]})]}),(0,a.jsxs)("table",{className:"table",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:"Date"}),a.jsx("th",{children:"SKU"}),a.jsx("th",{children:"User"}),a.jsx("th",{children:"Invoice Number"}),a.jsx("th",{children:"Nama Barang"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Barcode SN"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"text-center",children:a.jsx("span",{className:"loading loading-dots loading-sm"})})}):e.map(e=>(0,a.jsxs)("tr",{className:'hover:bg-base-200 dark:hover:bg-gray-700"',children:[a.jsx("td",{children:o(e.created_at)}),a.jsx("td",{children:e.sku}),a.jsx("td",{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"avatar",children:a.jsx("div",{className:"mask mask-squircle h-12 w-12",children:a.jsx(d.default,{src:"https://img.daisyui.com/images/profile/demo/2@94.webp",alt:"User Avatar",width:94,height:94,layout:"fixed",priority:!0})})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-bold",children:e.user.name}),a.jsx("div",{className:"text-sm opacity-50",children:e.user.email})]})]})}),a.jsx("td",{children:e.invoice_number}),a.jsx("td",{children:e.master_item.nama_barang}),a.jsx("td",{children:e.qty}),a.jsx("td",{children:e.barcode_sn}),(0,a.jsxs)("th",{children:[a.jsx("label",{htmlFor:"edit_report",className:"btn btn-ghost btn-xs text-blue-500",onClick:()=>L(e.id,e.sku,e.qty),children:"Edit"}),a.jsx("button",{className:"btn btn-ghost btn-xs text-red-500",onClick:()=>{let t=document.getElementById("delete_modal");t&&t.showModal(),k(e.id),S(e.sku)},children:"Delete"})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"mt-3",children:["Page ",A]}),(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("button",{className:"btn",onClick:()=>Q(e=>Math.max(e-1,1)),disabled:1===A,children:"Previous"}),a.jsx("button",{className:"btn mx-2",onClick:()=>{Q(e=>e+1),G(!0)},disabled:e.length<5||V,children:"Next"})]})]})]})]})},h=()=>(0,a.jsxs)("div",{className:"flex min-h-screen dark:bg-gray-900",children:[a.jsx(i.default,{}),(0,a.jsxs)("div",{className:"lg:ml-64 ml-0 flex-1 flex flex-col",children:[a.jsx(n.default,{}),a.jsx("main",{className:"p-6 flex-1",children:a.jsx("div",{className:"card shadow-xl bg-white dark:bg-gray-800",children:(0,a.jsxs)("div",{className:"card-body text-gray-900 dark:text-gray-100 overflow-x-auto",children:[a.jsx("h2",{className:"card-title",children:"Report Item Barang"}),a.jsx(u,{})]})})})]})]})},5125:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(5347).createProxy)(String.raw`/home/david-dwiyanto/Documents/Kerja/DBKlik/Warehouse System/warehouse-system-intern-frontend/src/app/(content)/report/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[379,32,511,720,808,689],()=>s(3504));module.exports=a})();